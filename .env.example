# ============================================================================
# ORBIT V3 BACKEND - ENVIRONMENT VARIABLES TEMPLATE
# ============================================================================
# Copy this file to .env and fill in your actual values
# SECURITY WARNING: Never commit .env to version control!
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME="Orbit V3 Backend"
APP_VERSION="1.0.0"
ENVIRONMENT="development"  # Options: development, staging, production
DEBUG=true                 # Set to false in production
LOG_LEVEL="INFO"          # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
HOST="0.0.0.0"            # Listen on all interfaces
PORT=8000                 # Application port
BACKEND_PORT=8000         # Docker host port mapping
WORKERS=4                 # Number of Uvicorn workers (production only)
RELOAD=true               # Auto-reload on code changes (development only)

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
# Docker Compose uses these to create the database
POSTGRES_USER="orbit"
POSTGRES_PASSWORD="orbit_dev_password"  # CHANGE IN PRODUCTION!
POSTGRES_DB="orbit_db"
POSTGRES_PORT=5432

# Application database URL (Docker Compose overrides this with service DNS)
DATABASE_URL="postgresql+asyncpg://orbit:orbit_dev_password@localhost:5432/orbit_db"
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false       # Set to true to log all SQL queries (debugging)

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_URL="redis://localhost:6379/0"  # Docker Compose overrides with service DNS
REDIS_PORT=6379
REDIS_MAX_CONNECTIONS=50
SESSION_TTL_SECONDS=86400          # 24 hours
MESSAGE_CACHE_TTL_SECONDS=3600     # 1 hour

# ============================================================================
# LLM PROVIDER SETTINGS
# ============================================================================
LLM_PROVIDER="anthropic"  # Options: anthropic, openai

# Anthropic (Claude) Configuration
ANTHROPIC_API_KEY="sk-ant-api03-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"  # REQUIRED: Get from console.anthropic.com
ANTHROPIC_MODEL="claude-3-5-sonnet-20241022"
ANTHROPIC_MAX_TOKENS=4096

# OpenAI (GPT) Configuration (optional)
OPENAI_API_KEY=""         # Get from platform.openai.com
OPENAI_MODEL="gpt-4-turbo-preview"
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# ============================================================================
# N8N INTEGRATION
# ============================================================================
N8N_BASE_URL="https://n8n-wsex.sliplane.app"
N8N_WEBHOOK_EMAIL_READ="/webhook/email-read"
N8N_WEBHOOK_CALENDAR_CREATE="/webhook/calendar-create"
N8N_WEBHOOK_OCR_PROCESS="/webhook/ocr-process"
N8N_API_KEY=""            # Optional: If n8n requires authentication
N8N_TIMEOUT_SECONDS=30
N8N_MAX_RETRIES=3

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# CRITICAL: Generate a secure secret key for production
# Generate with: openssl rand -hex 32
SECRET_KEY="a8f3c2e7b9d4a1f6e8c3b7d2a5e9f4c6b8a2d7e3f9c4b1a6e8d3c7b2a5e9f4c6"  # CHANGE IN PRODUCTION!
JWT_ALGORITHM="HS256"
JWT_EXPIRE_MINUTES=10080  # 7 days

# CORS Origins (comma-separated list)
CORS_ORIGINS="http://localhost:5173,http://localhost:3000,https://voice-assistant-6scggk9nv-robert-vills-projects.vercel.app"

# ============================================================================
# WEBSOCKET SETTINGS
# ============================================================================
WS_HEARTBEAT_INTERVAL=30        # Ping interval in seconds
WS_MAX_CONNECTIONS_PER_SESSION=5
WS_CONNECTION_TIMEOUT=300       # 5 minutes

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100   # Requests per window
RATE_LIMIT_BURST=20       # Burst allowance

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Sentry Error Tracking (optional)
SENTRY_DSN=""             # Get from sentry.io
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions

# Prometheus Metrics
PROMETHEUS_ENABLED=true

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_VOICE_INPUT=true
FEATURE_PROACTIVE_NOTIFICATIONS=true
FEATURE_BACKGROUND_TASKS=false  # Requires Celery worker

# ============================================================================
# NOTIFICATION SETTINGS
# ============================================================================
NOTIFICATION_RETENTION_DAYS=30

# ============================================================================
# DOCKER COMPOSE OVERRIDES (Optional)
# ============================================================================
# These override default values in docker-compose.yml

# PostgreSQL resource limits
# POSTGRES_MEMORY_LIMIT=2g
# POSTGRES_CPU_LIMIT=2.0

# Redis resource limits
# REDIS_MEMORY_LIMIT=512m
# REDIS_CPU_LIMIT=1.0

# Backend resource limits
# BACKEND_MEMORY_LIMIT=2g
# BACKEND_CPU_LIMIT=2.0

# ============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================================================
# Before deploying to production, ensure:
#
# [ ] Change SECRET_KEY to a cryptographically secure random value
# [ ] Change POSTGRES_PASSWORD to a strong password
# [ ] Set ENVIRONMENT=production
# [ ] Set DEBUG=false
# [ ] Set LOG_LEVEL=WARNING or ERROR
# [ ] Configure SENTRY_DSN for error tracking
# [ ] Update CORS_ORIGINS with production frontend URL
# [ ] Set ANTHROPIC_API_KEY with production key
# [ ] Review and adjust resource limits
# [ ] Enable HTTPS/TLS termination (use reverse proxy like Nginx/Traefik)
# [ ] Set up automated backups for postgres_data volume
# [ ] Configure monitoring and alerting
# [ ] Test database migrations on staging environment first
# [ ] Review rate limiting settings for expected traffic
# [ ] Set up log aggregation (ELK, Loki, CloudWatch, etc.)
# ============================================================================
